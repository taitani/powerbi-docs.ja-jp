---
title: 大規模なデータセット、データ ポイントの制限、およびデータ戦略
description: ビジュアルのデータ制限とデータ削減戦略
author: mihart
manager: kvivek
ms.reviewer: ''
ms.service: powerbi
ms.subservice: powerbi-desktop
ms.topic: conceptual
ms.date: 11/02/2018
ms.author: mihart
LocalizationGroup: Visualizations
ms.openlocfilehash: 52f679ee143e1009068c7de1ed9ce13e82e957dc
ms.sourcegitcommit: c8c126c1b2ab4527a16a4fb8f5208e0f7fa5ff5a
ms.translationtype: HT
ms.contentlocale: ja-JP
ms.lasthandoff: 01/15/2019
ms.locfileid: "54295376"
---
# <a name="data-point-limits-and-strategies-by-visual-type"></a>ビジュアルの種類別のデータ ポイントの制限と戦略

Power BI でビジュアルをレンダリングするときは、視覚エフェクトが迅速かつ正確である必要があります。 それには視覚化タイプ別に構成された、基になるアルゴリズムが必要です。 Power BI のビジュアルは、異なるサイズのデータセットを処理するために十分な柔軟性が必要です。 一部のデータセットのデータ ポイントは少数である一方、他のデータセットにはペタバイト単位のデータ ポイントがあります。 この記事では、Power BI で視覚エフェクトをレンダリングするために使用される戦略について説明します。

## <a name="data-reduction-strategies"></a>データ削減戦略
すべてのビジュアルは、大量のデータ分析を処理する可能性を考慮して、1 つ以上の "*データ削減戦略*" を採用しています。 単純なテーブルも、クライアントにすべてのデータセットを読み込むことを回避する戦略を採用しています。  使用されている削減戦略は、視覚化タイプによって異なります。 各ビジュアルは、サーバーに送信されるデータ要求の生成の一環として、サポートされている "*データ削減戦略*" から選択します。 

各ビジュアルはそれらの戦略上のパラメーターをコントロールし、データの全体量に影響を及ぼします。   

## <a name="strategies"></a>戦略
各戦略には、視覚化される図形やデータの種類に基づく既定値があります。 ただし、既定値は正しいユーザー エクスペリエンスを提供するために、Power BI の [書式設定] ウィンドウでオーバーライド可能です。 

* **データのウィンドウ化** (セグメント化):データセット全体のフラグメントを段階的に読み込むことで、ユーザーがビジュアル内のデータをスクロールできるようにします。
* **TopN**:最初の N 個の項目のみを表示します
* **簡易サンプル**:最初、最後、およびその間の均等に配分された N 個の項目を表示します。
* **BottomN**:最後の N 個の項目のみを表示します。  頻繁に更新されるデータを監視するのに役立ちます。
* **高密度サンプリング** - 外れ値や曲線の形状をより適切に考慮する強化されたサンプリング アルゴリズム。
    * **ビン分割行サンプリング** - 軸間のビン分割の外れ値に基づくサンプル データ ポイント
    * **重複ポイント サンプリング** - 外れ値を保持するために重複する値に基づくサンプル データ ポイント

## <a name="statistics"></a>統計
特定のモデルは特定の列の値の数に関する統計情報を提供できます。 このような情報が存在するとき、ビジュアルが戦略の値の数を明示的にオーバーライドしない場合は、複数の階層間の均衡を図るためにその情報を活用します。

詳しくは、「[What's new in Analysis Services](https://docs.microsoft.com/en-us/sql/analysis-services/what-s-new-in-analysis-services?view=sql-server-2017)」(Analysis Services の新機能) をご覧ください

## <a name="dynamic-limits"></a>動的制限
上記の戦略に加えて、グループ化列 (軸と凡例、またはカテゴリと系列) の 2 つの階層があるビジュアルは、"*動的制限*" と呼ばれる 1 つの追加戦略を使用します。  動的制限は、データ ポイントの均衡を図るよう設計されています。 

動的制限を使用すると、静的制限よりもスパース データのポイントの選択肢が増えます。 たとえば、100 カテゴリおよび 10 シリーズ、合計で 1000 ポイントを選択できるようビジュアルを構成できます。 ただし、実際のデータは 50 カテゴリおよび 20 シリーズです。  クエリの実行時に、動的制限は 20 シリーズすべてを選択し、要求された 1000 ポイントを満たします。

動的制限は、以下に示すように、対象のサーバーで使用できるときは自動的に適用されます。

* オンプレミスの SSAS バージョン 2016 以降と連携する Power BI Desktop で、[サーバーの SuperDax 機能を活用している](https://blogs.msdn.microsoft.com/analysisservices/2015/09/02/whats-new-in-microsoft-sql-server-analysis-services-tabular-models-in-sql-server-2016-ctp-2-3/)

* インポートされたモデル、直接クエリ、サービスへのライブ接続、または AS PaaS へのライブ接続を使用している Desktop および Power BI サービス。 

* オンプレミス ゲートウェイを通じてオンプレミスの SSAS に接続しているときは、Power BI サービスで動的制限を使用できません。 オンプレミス ゲートウェイは、オンプレミスの SSAS から異なる構造の結果セットを返す動的制限戦略を完全にはサポートしません。  

## <a name="strategies-and-data-point-limits-by-visual-type"></a>視覚化タイプ別の戦略とデータ ポイントの制限

### <a name="area-chart"></a>面グラフ
[行サンプリングの仕組み](../desktop-high-density-sampling.md#how-the-new-line-sampling-algorithm-works)に関するセクションをご覧ください

### <a name="barcolumn-chart"></a>横棒/縦棒グラフ
- カテゴリ別モードのとき
    - カテゴリ:一度に 500 行のウィンドウを使用することによる仮想化
    - 系列:上位 60
    - スカラー モードのとき (動的制限を使用できる場合あり)
        - 最大ポイント数:10,000
        - カテゴリ:500 の値のサンプル
        - 系列:上位 20 の値

### <a name="card-multirow"></a>カード (複数行) 
- 値:一度に 200 行のウィンドウを使用することによる仮想化

### <a name="combo-chart"></a>複合グラフ
 縦棒グラフと同じ戦略を使用します。 **複合グラフ**の線では**折れ線グラフ**で使用される高密度アルゴリズムは使用されないことに注意してください。

### <a name="custom-visuals"></a>カスタム ビジュアル
最大で 30,000、ただし使用する戦略を指定するのはそのビジュアルの作成者

### <a name="doughnut"></a>ドーナツ
- 最大ポイント数:3,500
- グループ:上位 500
- 詳細:上位 20

### <a name="filled-map-choropleth"></a>塗り分け地図 (コロプレス) 
塗り分け地図では静的または動的制限を使用できます。 Power BI は、動的制限、静的制限、最後に構成の順で削減の使用を試行します。 
- 最大ポイント数:10000
- カテゴリ:上位 500
- 系列 (X と Y の両方が存在するとき):上位 20

### <a name="funnel"></a>じょうごグラフ
- 最大ポイント数:3,500
- カテゴリ:上位 3,500

### <a name="kpi"></a>KPI
- トレンド軸
- 下位 3,500

### <a name="line-chart"></a>折れ線グラフ
[行サンプリングの仕組み](../desktop-high-density-sampling.md#how-the-new-line-sampling-algorithm-works)に関するセクションをご覧ください

### <a name="line-chart-high-density"></a>折れ線グラフ、高密度
[高密度サンプリング](../desktop-high-density-sampling.md)に関するページをご覧ください

### <a name="map"></a>マップ 
- 最大ポイント数:3,500

構成によっては、地図には次のものがあります。
- 場所:上位 3,500
- 場所、サイズ:上位 3,500
- 場所、緯度と経度の集計 (+/- サイズ):上位 3,500
- 緯度、経度: [高密度散布図](desktop-high-density-scatter-charts.md)に関する記事をご覧ください
- 緯度、経度、サイズ:上位 3,500
- 凡例、緯度、経度: [高密度散布図](desktop-high-density-scatter-charts.md)に関する記事をご覧ください
- 凡例、緯度、経度、サイズ:上位 233 の凡例、上位 15 の緯度および経度 (静的または動的制限を使用できる場合あり)
- 場所、凡例、緯度経度の集計 (+/- サイズ):上位 233 の場所、上位 15 の凡例 (静的または動的制限を使用できる場合あり)

### <a name="matrix"></a>マトリックス
- 行:一度に 500 行のウィンドウを使用することによる仮想化
- 列:上位 100 のグループ化列 
- 値: 複数の値はデータ削減としてカウントされません

### <a name="radial-gauge"></a>放射状ゲージ
削減戦略なし

### <a name="slicer"></a>スライサー
- 値:一度に 200 行のウィンドウを使用することによる仮想化

### <a name="scatter-chart-high-density"></a>散布図 (高密度)
[高密度な散布図](https://docs.microsoft.com/en-us/power-bi/visuals/desktop-high-density-scatter-charts)に関する記事をご覧ください

### <a name="pie"></a>円
- 最大ポイント数:3,500
- グループ:上位 500
- 詳細:上位 20

### <a name="r--python-visuals"></a>R および Python ビジュアル
150,000 行に制限。 150,000 を超える行が選択されている場合、上位の 150,000 行のみが使用されます

### <a name="ribbon-chart"></a>リボン グラフ
- カテゴリ別モードのとき
    - カテゴリ:一度に 500 行のウィンドウを使用することによる仮想化 (データのウィンドウ化)
    - 系列:上位 60
    - スカラー モードのとき (動的制限を使用できる場合あり)
        - 最大ポイント数:10,000
        - カテゴリ:500 の値のサンプル
        - 系列:上位 20 の値

### <a name="shape-map"></a>マップのシェイプ
塗り分け地図では静的または動的制限を使用できます。 
- 最大ポイント数:10,000
- カテゴリ:上位 500
- 系列 (X と Y の両方が存在するとき):上位 20

### <a name="table"></a>テーブル
- 値:一度に 500 行のウィンドウを使用することによる仮想化 (データのウィンドウ化)

### <a name="tree-map-this-could-use-statistics-or-dynamic-limits"></a>ツリー マップ (静的または動的制限を使用できる場合あり)
- 最大ポイント数:3,500
- グループ:上位 500
- 詳細:上位 20

### <a name="waterfall-chart"></a>ウォーターフォール グラフ
- カテゴリ バケットのみのとき
    - 最大ポイント数:3,500
    - カテゴリのみ - 上位 3,500
- カテゴリと内訳の両方が存在するとき
    - カテゴリ:一度に 30 行のウィンドウを使用することによる仮想化 (データのウィンドウ化)
    - 内訳 - 上位 200 の値


## <a name="next-steps"></a>次の手順
[視覚エフェクトの種類](power-bi-report-visualizations.md)
